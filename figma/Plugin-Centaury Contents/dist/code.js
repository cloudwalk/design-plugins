(()=>{"use strict";var e=function(e,t,o,a){return new(o||(o=Promise))((function(n,i){function r(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}l((a=a.apply(e,t||[])).next())}))};figma.showUI(__html__,{width:375,height:812,themeColors:!0,title:"Centaury Contents"});figma.ui.onmessage=t=>e(void 0,void 0,void 0,(function*(){var o;console.log("Main controller received message:",t),console.log("Message type:",t.type),console.log("Message content:",t);try{if("update-text"===t.type)yield(t=>e(void 0,void 0,void 0,(function*(){const e=figma.currentPage.selection.filter((e=>"TEXT"===e.type)).filter((e=>!e.removed));if(0!==e.length)try{yield Promise.all(e.flatMap((e=>e.getRangeAllFontNames(0,e.characters.length).map(figma.loadFontAsync)))),e.forEach((e=>{t.text&&(e.characters=t.text)})),figma.notify("Texto atualizado com sucesso")}catch(e){console.error("Error updating text:",e),figma.notify("Erro ao atualizar o texto")}else figma.notify("Selecione um texto para atualizar")})))(t);else if("update-multiple-texts"===t.type){const a=null===(o=t.items)||void 0===o?void 0:o.some((e=>e.includes("R$")||e.includes("x")||e.includes("CartÃ£o")||e.includes("Pix")||e.includes("Boleto")));yield((t,...o)=>e(void 0,[t,...o],void 0,(function*(e,t=!1){const o=figma.currentPage.selection.filter((e=>"TEXT"===e.type)).filter((e=>!e.removed));if(0!==o.length)try{if(yield Promise.all(o.flatMap((e=>e.getRangeAllFontNames(0,e.characters.length).map(figma.loadFontAsync)))),e.items&&e.items.length>0){const a=t?e.items:(e=>{const t=[...e];for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}return t})([...e.items]);o.forEach(((e,t)=>{const o=t%a.length;e.characters=a[o]})),figma.notify("Textos atualizados com sucesso")}}catch(e){console.error("Error updating text nodes:",e),figma.notify("Erro ao atualizar os textos")}else figma.notify("Selecione um ou mais textos para atualizar")})))(t,a)}}catch(e){console.error("Error in message handler:",e),figma.notify("Erro ao processar a mensagem")}}))})();